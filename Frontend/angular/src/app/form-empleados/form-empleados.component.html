<form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()" class="p-3">
  <h4 class="mb-4 text-center">
    {{ editMode ? 'Editar usuario' : 'Crear nuevo usuario' }}
  </h4>

  <!-- Nombre -->
  <div class="mb-3">
    <label>Nombre</label>
    <input type="text" class="form-control" formControlName="nombre" placeholder="Ej: Mateo" />
    <div *ngIf="isInvalid('nombre')" class="text-danger small">
      El nombre es obligatorio y debe tener al menos 2 caracteres.
    </div>
  </div>

  <!-- Apellido -->
  <div class="mb-3">
    <label>Apellido</label>
    <input type="text" class="form-control" formControlName="apellido" placeholder="Ej: Acuña" />
    <div *ngIf="isInvalid('apellido')" class="text-danger small">
      El apellido es obligatorio y debe tener al menos 2 caracteres.
    </div>
  </div>

  <!-- Email -->
  <div class="mb-3">
    <label>Email</label>
    <input type="email" class="form-control" formControlName="email" placeholder="Ej: usuario@correo.com" />
    <div *ngIf="isInvalid('email')" class="text-danger small">
      Ingrese un correo electrónico válido.
    </div>
  </div>

  <!-- Contraseña -->
  <div class="mb-3">
    <label>Contraseña</label>
    <input type="password"
          class="form-control"
          formControlName="password"
          placeholder="Contraseña"
          minlength="4"
          maxlength="50" />
    <div *ngIf="f['password'].invalid && (f['password'].dirty || submitted)" class="text-danger small">
      La contraseña debe tener al menos 4 caracteres.
    </div>
  </div>

  <!-- Rol -->
  <div class="mb-3">
    <label>Rol</label>
    <select class="form-select" formControlName="rol">
      <option value="">Seleccione un rol...</option>
      <option *ngFor="let rol of rolesDisponibles" [value]="rol">{{ rol | titlecase }}</option>
    </select>
    <div *ngIf="isInvalid('rol')" class="text-danger small">
      Seleccione un rol válido.
    </div>
  </div>

  <!-- Estado -->
  <div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" formControlName="estado" id="estadoCheck" />
    <label class="form-check-label" for="estadoCheck">Usuario activo</label>
  </div>

  <!-- Botones -->
  <div class="d-flex justify-content-end gap-2 mt-4">
    <button type="button" class="btn btn-secondary" (click)="volver()">Volver</button>
    <button type="submit" class="btn btn-success">
      {{ editMode ? 'Guardar cambios' : 'Crear usuario' }}
    </button>
  </div>
</form>
