<nav class="navbar navbar-dark shadow justify-content-between fixed-top">
  
  <div class="d-flex align-items-center">
    <button class="btn btn-outline-light" (click)="Sidebar()">☰</button>
    <h4 class="text-white ms-3 m-0">RailVision</h4>
  </div>

  <div class="dropdown">
    <button class="btn btn-outline-light mb-0 dropdown-toggle" type="button" id="perfilMenu"
    data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-person-circle"></i>
    </button>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="perfilMenu">
      <li><a class="dropdown-item" href="#">Ver perfil</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item" (click)="logout()">Cerrar sesión</a></li>
    </ul>
  </div>
</nav>

<div class="sidebar text-white d-flex flex-column"
     [ngClass]="{ 'sidebar-expanded': expand, 'sidebar-collapsed': !expand }">

  <!-- MENU SUPERIOR -->
  <ul class="list-unstyled flex-grow-1">

    <li>
      <button class="nav-link text-white" (click)="navegar('/menu/viajes')">
        <i class="bi bi-sign-turn-slight-right"></i> Viajes
      </button>
    </li>

    <li *ngIf="authRoles.esAdmin() || authRoles.esOperador()">
      <button class="nav-link text-white" (click)="navegar('/menu/trenes')">
        <i class="bi bi-train-front"></i> Trenes
      </button>
    </li>

    <li *ngIf="authRoles.esAdmin()">
      <button class="nav-link text-white" (click)="navegar('/menu/empleados')">
        <i class="bi bi-person-badge"></i> Empleados
      </button>
    </li>

    <li *ngIf="authRoles.esAdmin() || authRoles.esOperador()">
      <button class="nav-link text-white" (click)="navegar('/menu/rutas')">
        <i class="bi bi-signpost-split"></i> Rutas
      </button>
    </li>

    <li *ngIf="authRoles.esAdmin()">
      <button class="nav-link text-white" (click)="navegar('/menu/estaciones')">
        <i class="bi bi-signal"></i> Estaciones
      </button>
    </li>

  </ul>

  <!-- MENU INFERIOR (LEGAL) AL FONDO -->
  <ul class="list-unstyled mt-auto">

    <span class="sidebar-legal-title">Legal</span>

    <li>
      <a class="nav-link text-white" href="/legal/proteccion-datos" target="_blank">
        Protección de datos
      </a>
    </li>

    <li>
      <a class="nav-link text-white" href="/legal/terminos" target="_blank">
        Términos y condiciones
      </a>
    </li>

    <li>
      <a class="nav-link text-white" href="/legal/faq" target="_blank">
        Preguntas frecuentes
      </a>
    </li>

  </ul>

</div>

<div class="overlay" 
  *ngIf="expand"
  (click)="Sidebar()">
</div>

<section>
  <router-outlet></router-outlet>
</section>
